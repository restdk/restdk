import { make } from "@restdk/shared";
import {
  injectLib,
  injectEnv,
  injectRequest,
  injectBaseModel,
  injectTools,
} from "../helper/inject";
import { Model } from "./Model";

export class Sdk {
  name: string;
  baseURL: string;
  env: string;

  models: Model[];

  getModelString() {
    return this.models.map((model) => "export " + model);
  }

  toString() {
    return `
      ${injectLib()}
      /*
      This file is automatically generated. Do not modify it.
      */
      ${injectEnv()}
      ${injectRequest(this)}
      ${injectBaseModel()}
      ${injectTools()}
      ${this.getModelString().join("\n")}
    `;
  }

  static create(props: Partial<Sdk>) {
    return make(new Sdk(), props);
  }
}
